# ==============================================================================
# Server Scripts Configuration File
# Description: Centralized configuration for all server optimization scripts
# Author:      f3liiix
# Date:        2025-08-05
# Version:     1.0.0
# ==============================================================================

# --- 通用配置 ---
# 日志文件路径
LOG_FILE="/var/log/server_optimization.log"

# 备份目录基础路径
BACKUP_BASE_DIR="/etc/server_backup"

# --- TCP调优配置 ---
TCP_BACKUP_DIR="${BACKUP_BASE_DIR}/tcp_tuning"
SYSCTL_CONF="/etc/sysctl.conf"
LIMITS_CONF="/etc/security/limits.conf"
MIN_KERNEL_VERSION="4.9"

# TCP优化参数
TCP_NETDEV_MAX_BACKLOG=100000
TCP_SOMAXCONN=8192
TCP_MAX_SYN_BACKLOG=8192

TCP_RMEM_DEFAULT=262144
TCP_WMEM_DEFAULT=262144
TCP_RMEM_MAX=67108864
TCP_WMEM_MAX=67108864

# TIME-WAIT优化
TCP_TW_REUSE=1
TCP_FIN_TIMEOUT=30
TCP_MAX_TW_BUCKETS=200000

# TCP快速打开
TCP_FASTOPEN=3

# --- BBR配置 ---
BBR_BACKUP_DIR="${BACKUP_BASE_DIR}/bbr"
BBR_MIN_KERNEL_VERSION="4.9"

# BBR内核下载源配置
UBUNTU_KERNEL_BASE="https://kernel.ubuntu.com/~kernel-ppa/mainline"
CENTOS6_KERNEL_BASE="https://dl.lamp.sh/files"
CENTOS7_KERNEL_BASE="https://dl.lamp.sh/kernel/el7"

# --- SSH配置 ---
SSH_BACKUP_DIR="${BACKUP_BASE_DIR}/ssh"
SSHD_CONFIG="/etc/ssh/sshd_config"
SSH_DEFAULT_PORT=22

# SSH端口范围
SSH_MIN_PORT=1024
SSH_MAX_PORT=65535

# --- DNS配置 ---
DNS_BACKUP_DIR="${BACKUP_BASE_DIR}/dns"
RESOLV_CONF="/etc/resolv.conf"

# 预设DNS服务器
DNS_GOOGLE="8.8.8.8 8.8.4.4"
DNS_CLOUDFLARE="1.1.1.1 1.0.0.1"
DNS_ALI="223.5.5.5 223.6.6.6"
DNS_TENCENT="119.29.29.29 182.254.116.116"

# --- IPv6配置 ---
IPV6_BACKUP_DIR="${BACKUP_BASE_DIR}/ipv6"

# --- 系统更新配置 ---
UPDATE_BACKUP_DIR="${BACKUP_BASE_DIR}/update"